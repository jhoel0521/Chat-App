<div class="h-screen flex flex-col bg-slate-900">
  <!-- Chat Header - Fijo arriba -->
  <app-chat-header 
    [room]="room" 
    [showBackButton]="true"
    (onBack)="goBack()">
  </app-chat-header>

  <!-- Loading de sala -->
  <div *ngIf="isLoadingRoom" class="flex-1 flex items-center justify-center">
    <div class="text-center">
      <div class="loading loading-spinner loading-lg text-primary"></div>
      <div class="mt-4 text-lg text-slate-300">Cargando sala...</div>
    </div>
  </div>

  <!-- Error de sala -->
  <div *ngIf="roomError && !isLoadingRoom" class="flex-1 flex items-center justify-center">
    <div class="text-center p-8 bg-slate-800 rounded-box shadow-lg border border-slate-700 max-w-md">
      <div class="text-6xl mb-4 text-error">‚ùå</div>
      <h2 class="text-2xl font-bold mb-2 text-white">Error al cargar la sala</h2>
      <p class="text-slate-300 mb-6">{{ roomError }}</p>
      <button class="btn btn-primary" (click)="loadRoom()">
        Reintentar
      </button>
    </div>
  </div>

  <!-- Contenido principal -->
  <div *ngIf="!isLoadingRoom && !roomError" class="flex-1 flex flex-col min-h-0">
    <!-- Messages List - Con scroll interno -->
    <app-messages-list 
      class="flex-1 min-h-0"
      [messages]="messages"
      [currentUser]="currentUser"
      [loading]="isLoadingMessages">
    </app-messages-list>

    <!-- Message Input - Fijo abajo -->
    <app-message-input 
      [disabled]="isLoadingMessages"
      (sendMessage)="onSendMessage($event)">
    </app-message-input>
  </div>
</div>